(this["webpackJsonpbrowser-camera-test"]=this["webpackJsonpbrowser-camera-test"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),i=n.n(r),a=n(5),s=n.n(a),o=(n(12),n(2)),j=(n(13),n(4)),u=n.n(j),d=n(6);function l(){return(l=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(e){return e.getVideoTracks().forEach((function(e){return e.stop()}))}));case 2:return e.abrupt("return",navigator.mediaDevices.enumerateDevices());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],i=t[1],a=Object(r.useState)([]),s=Object(o.a)(a,2),j=s[0],u=s[1];Object(r.useEffect)((function(){u(n.filter((function(e){return"videoinput"===e.kind})).map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e.label}),Object(c.jsx)("td",{children:Object(c.jsx)("textarea",{value:'{\n  "video": {\n    "deviceId": "'.concat(e.deviceId,'",\n    "width": 1280,\n    "height": 720\n  }\n}'),readOnly:!0,contentEditable:!1})})]},e.deviceId)})))}),[n]);var d=function(){(function(){return l.apply(this,arguments)})().then((function(e){return i(e)})).catch((function(e){console.log(e)}))};return Object(r.useEffect)((function(){d()}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{onClick:function(){d()},children:"\u5217\u6319"}),Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"\u30e9\u30d9\u30eb"}),Object(c.jsx)("th",{children:"\u5236\u7d04"})]})}),Object(c.jsx)("tbody",{children:j})]})]})},O=function(e){var t=Object(r.useRef)(document.createElement("video")),n=Object(r.useState)("\u3053\u3053\u306bVideoTrack\u306esettings()\u304c\u51fa\u307e\u3059"),i=Object(o.a)(n,2),a=i[0],s=i[1];Object(r.useEffect)((function(){try{if(0===e.constraint.length)return;var n=JSON.parse(e.constraint);console.log(n),navigator.mediaDevices.getUserMedia(n).then((function(e){console.log("Stream opened"),t.current.srcObject&&(t.current.srcObject.getVideoTracks().forEach((function(e){return e.stop()})),t.current.srcObject=null),s(JSON.stringify(e.getVideoTracks().map((function(e){return e.getSettings()})),null,"  ")),t.current.srcObject=e,t.current.onloadedmetadata=function(){t.current.play()}}))}catch(c){console.log(c),s("ERROR: ".concat(c))}}),[e.constraint]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("video",{ref:t,style:{object_fit:"scale_down",width:320,height:180}}),Object(c.jsx)("textarea",{rows:20,cols:80,contentEditable:!1,readOnly:!0,value:a})]})};var h=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],i=t[1],a=Object(r.useState)(n),s=Object(o.a)(a,2),j=s[0],u=s[1];return Object(c.jsx)("div",{children:Object(c.jsx)("header",{children:Object(c.jsx)("table",{children:Object(c.jsxs)("tbody",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)(b,{})}),Object(c.jsx)("td",{children:Object(c.jsx)("textarea",{value:n,onChange:function(e){return i(e.target.value)},rows:20,cols:80,placeholder:"\u5236\u7d04\u3092JSON\u3067\u66f8\u3044\u3066\u300c\u53cd\u6620\u300d\u30dc\u30bf\u30f3\u30af\u30ea\u30c3\u30af"})}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{onClick:function(){u(n)},children:"\u53cd\u6620"})})]}),Object(c.jsx)("tr",{children:Object(c.jsx)("td",{colSpan:3,children:Object(c.jsx)(O,{constraint:j})})})]})})})})},f=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))};s.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(h,{})}),document.getElementById("root")),f()}},[[15,1,2]]]);
//# sourceMappingURL=main.dea9a44f.chunk.js.map