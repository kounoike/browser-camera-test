(this["webpackJsonpbrowser-camera-test"]=this["webpackJsonpbrowser-camera-test"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),i=n.n(r),a=n(5),s=n.n(a),o=(n(12),n(2)),j=(n(13),n(4)),d=n.n(j),u=n(6);function b(){return(b=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0,audio:!1});case 2:return e.abrupt("return",navigator.mediaDevices.enumerateDevices());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var l=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],i=t[1],a=Object(r.useState)([]),s=Object(o.a)(a,2),j=s[0],d=s[1];return Object(r.useEffect)((function(){(function(){return b.apply(this,arguments)})().then((function(e){return i(e)}))}),[]),Object(r.useEffect)((function(){d(n.filter((function(e){return"videoinput"===e.kind})).map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:e.label}),Object(c.jsx)("td",{children:Object(c.jsx)("input",{type:"text",value:'"'.concat(e.deviceId,'"'),contentEditable:!1})})]},e.deviceId)})))}),[n]),Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"\u30e9\u30d9\u30eb"}),Object(c.jsx)("th",{children:"deviceId"})]})}),Object(c.jsx)("tbody",{children:j})]})},O=function(e){var t=Object(r.useRef)(document.createElement("video")),n=Object(r.useState)(""),i=Object(o.a)(n,2),a=i[0],s=i[1];Object(r.useEffect)((function(){try{var n=JSON.parse(e.constraint);console.log(n),navigator.mediaDevices.getUserMedia(n).then((function(e){console.log("Stream opened");var n=t.current.srcObject;n&&n.getVideoTracks().forEach((function(e){return e.stop()})),s(JSON.stringify(e.getVideoTracks().map((function(e){return e.getSettings()})),null,"  ")),t.current.srcObject=e,t.current.onloadedmetadata=function(){t.current.play()}}))}catch(c){console.log(c)}}),[e.constraint]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("video",{ref:t,style:{object_fit:"scale_down",width:320,height:180}}),Object(c.jsx)("textarea",{rows:20,cols:80,contentEditable:!1,value:a})]})};var h=function(){var e=Object(r.useState)('{\n  "video": {\n    "deviceId": "default",\n    "width": 1280,\n    "height": 720\n  }\n}'),t=Object(o.a)(e,2),n=t[0],i=t[1],a=Object(r.useState)(n),s=Object(o.a)(a,2),j=s[0],d=s[1];return Object(c.jsx)("div",{children:Object(c.jsx)("header",{children:Object(c.jsx)("table",{children:Object(c.jsxs)("tbody",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)(l,{})}),Object(c.jsx)("td",{children:Object(c.jsx)("textarea",{value:n,onChange:function(e){return i(e.target.value)},rows:20,cols:80})}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{onClick:function(){d(n)},children:"\u53cd\u6620"})})]}),Object(c.jsx)("tr",{children:Object(c.jsx)("td",{colSpan:3,children:Object(c.jsx)(O,{constraint:j})})})]})})})})},f=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),i(e),a(e)}))};s.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(h,{})}),document.getElementById("root")),f()}},[[15,1,2]]]);
//# sourceMappingURL=main.aaf10516.chunk.js.map